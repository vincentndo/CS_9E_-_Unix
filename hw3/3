Part 1

sed -n 's/\./\!/g;s/\!$/\!!/p' test

sed 's/\(\.\) \(\.$\) \(\!\) \(\!\!\)/\3 \4 \3 \4/' test

Part 2

echo img_12-31-07_01.jpg | sed 's/[a-z]*/newyears/;s/-\([0-9][0-9]\)_/-20\1_/;s/_\([0-9][0-9]\)\./_0\1./;s/_\([0-9]*\)-\([0-9]*\)-\([0-9]*\)_/_\3-\1-\2_/'
newyears_2007-12-31_101.jpg

for i in *; do var=$(echo $i | sed 's/[a-z]*/newyears/;s/-\([0-9][0-9]\)_/-20\1_/;s/_\([0-9][0-9]\)\./_0\1./;s/_\([0-9]*\)-\([0-9]*\)-\([0-9]*\)_/_\3-\1-\2_/'); mv $i $var; done